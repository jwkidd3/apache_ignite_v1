<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Module 10: Integration and Connectivity - Apache Ignite</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/reveal.js/4.5.0/reset.min.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/reveal.js/4.5.0/reveal.min.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/reveal.js/4.5.0/theme/white.min.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/styles/idea.min.css">
    <style>
        .reveal .slides section { overflow: hidden; }
        .reveal section { max-height: 100%; }
        :root {
            --r-heading-color: #2c3e50;
            --r-main-color: #333;
            --r-link-color: #e67e22;
            --r-link-color-hover: #d35400;
            --r-selection-background-color: #e67e22;
            --accent-color: #e67e22;
        }
        .reveal h1, .reveal h2, .reveal h3, .reveal h4 {
            color: #2c3e50;
            text-transform: none;
        }
        .reveal h1 {
            font-size: 2.2em;
        }
        .reveal h2 {
            font-size: 1.4em; margin-bottom: 0.3em;
        }
        .reveal h3 {
            font-size: 1.1em; margin-bottom: 0.2em;
        }
        .reveal pre {
            width: 100%;
            font-size: 0.48em;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
        }
        .reveal pre code {
            max-height: 500px;
            padding: 15px;
        }
        .reveal ul, .reveal ol {
            display: block;
            margin-left: 1em;
        }
        .reveal li {
            margin: 0.5em 0;
        }
        .accent {
            color: #e67e22;
        }
        .highlight-box {
            background: linear-gradient(135deg, #e67e22 0%, #d35400 100%);
            color: white;
            padding: 20px;
            border-radius: 8px;
            margin: 20px 0;
        }
        .info-box {
            background: #f8f9fa;
            border-left: 4px solid #e67e22;
            padding: 15px 20px;
            margin: 20px 0;
            text-align: left;
        }
        .two-column {
            display: flex;
            gap: 40px;
            align-items: flex-start;
        }
        .two-column > * {
            flex: 1;
        }
        .comparison-table {
            width: 100%;
            border-collapse: collapse;
            font-size: 0.55em;
            margin: 20px 0;
        }
        .comparison-table th {
            background: #2c3e50;
            color: white;
            padding: 12px;
            text-align: left;
        }
        .comparison-table td {
            padding: 10px 12px;
            border-bottom: 1px solid #ddd;
        }
        .comparison-table tr:nth-child(even) {
            background: #f8f9fa;
        }
        .architecture-diagram {
            background: #f8f9fa;
            border: 2px solid #e67e22;
            border-radius: 8px;
            padding: 10px;
            font-family: monospace;
            font-size: 0.45em;
            text-align: left;
            white-space: pre;
            max-width: 100%;
            overflow: hidden;
            line-height: 1.2;
        }
        .benefit-list {
            list-style: none;
            padding: 0;
        }
        .benefit-list li::before {
            content: "\2713";
            color: #e67e22;
            font-weight: bold;
            margin-right: 10px;
        }
        .warning-box {
            background: #fff3e0;
            border-left: 4px solid #e67e22;
            padding: 15px 20px;
            margin: 20px 0;
            text-align: left;
        }
        .slide-number {
            color: #e67e22 !important;
        }
        .reveal .progress {
            background: rgba(0, 0, 0, 0.2);
        }
        .reveal .progress span {
            background: #e67e22;
        }
        .fragment.highlight-current-orange.current-fragment {
            color: #e67e22;
        }
        .small-code pre {
            font-size: 0.42em;
        }
        .icon-grid {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 20px;
            margin: 30px 0;
        }
        .icon-item {
            background: #f8f9fa;
            padding: 20px;
            border-radius: 8px;
            border-bottom: 3px solid #e67e22;
        }
        .icon-item h4 {
            margin: 10px 0 5px 0;
            color: #2c3e50;
        }
        .icon-item p {
            font-size: 0.8em;
            margin: 0;
            color: #666;
        }
    </style>
</head>
<body>
    <div class="reveal">
        <div class="slides">
            <!-- Title Slide -->
            <section>
                <h1>Module 10</h1>
                <h2 style="color: #e67e22;">Integration and Connectivity</h2>
                <p style="color: #666; margin-top: 40px;">Apache Ignite Training Course</p>
                <p style="font-size: 0.55em; color: #999;">Duration: 60 minutes</p>
            </section>

            <!-- Objectives -->
            <section>
                <h2>Learning Objectives</h2>
                <ul class="benefit-list">
                    <li class="fragment">Use Ignite REST API for language-agnostic access</li>
                    <li class="fragment">Integrate Ignite with Spring Framework and Spring Boot</li>
                    <li class="fragment">Configure Kafka connector for real-time streaming</li>
                    <li class="fragment">Set up Hibernate L2 cache for ORM optimization</li>
                    <li class="fragment">Use JDBC/ODBC drivers for SQL connectivity</li>
                    <li class="fragment">Understand client vs server node configurations</li>
                </ul>
            </section>

            <!-- Integration Overview -->
            <section>
                <h2>Ignite Integration Ecosystem</h2>
                <div class="icon-grid">
                    <div class="icon-item">
                        <h4>REST API</h4>
                        <p>HTTP-based access</p>
                    </div>
                    <div class="icon-item">
                        <h4>Spring</h4>
                        <p>Framework integration</p>
                    </div>
                    <div class="icon-item">
                        <h4>Kafka</h4>
                        <p>Stream processing</p>
                    </div>
                    <div class="icon-item">
                        <h4>Hibernate</h4>
                        <p>L2 Cache provider</p>
                    </div>
                    <div class="icon-item">
                        <h4>JDBC/ODBC</h4>
                        <p>SQL connectivity</p>
                    </div>
                    <div class="icon-item">
                        <h4>Thin Clients</h4>
                        <p>Lightweight access</p>
                    </div>
                </div>
            </section>

            <!-- REST API Section -->
            <section>
                <section>
                    <h2>REST API</h2>
                    <p class="accent" style="font-size: 1.2em;">HTTP-Based Access to Ignite</p>
                    <div class="info-box">
                        <strong>15 minutes</strong> - Language-agnostic access via HTTP endpoints
                    </div>
                </section>

                <section>
                    <h3>REST API Overview</h3>
                    <div class="two-column">
                        <div>
                            <h4 style="color: #e67e22;">Use Cases</h4>
                            <ul>
                                <li>Multi-language clients</li>
                                <li>Web applications</li>
                                <li>Monitoring tools</li>
                                <li>Quick prototyping</li>
                                <li>Non-Java systems</li>
                            </ul>
                        </div>
                        <div>
                            <h4 style="color: #e67e22;">Features</h4>
                            <ul>
                                <li>Cache operations</li>
                                <li>SQL queries</li>
                                <li>Cluster topology</li>
                                <li>Compute tasks</li>
                                <li>Metrics retrieval</li>
                            </ul>
                        </div>
                    </div>
                </section>

                <section>
                    <h3>Enabling REST API</h3>
                    <p>Add the REST HTTP module dependency:</p>
                    <pre><code class="xml">&lt;dependency&gt;
    &lt;groupId&gt;org.apache.ignite&lt;/groupId&gt;
    &lt;artifactId&gt;ignite-rest-http&lt;/artifactId&gt;
    &lt;version&gt;2.16.0&lt;/version&gt;
&lt;/dependency&gt;</code></pre>
                </section>

                <section>
                    <h3>REST Configuration</h3>
                    <pre><code class="java">import org.apache.ignite.configuration.ConnectorConfiguration;
import org.apache.ignite.configuration.IgniteConfiguration;

IgniteConfiguration cfg = new IgniteConfiguration();
cfg.setIgniteInstanceName("rest-node");

// Enable REST connector
ConnectorConfiguration connectorCfg = new ConnectorConfiguration();
connectorCfg.setPort(8080);
cfg.setConnectorConfiguration(connectorCfg);

// Start node with REST enabled
Ignite ignite = Ignition.start(cfg);</code></pre>
                    <p class="fragment" style="font-size: 0.8em; color: #666;">
                        REST endpoint available at: <code style="color: #e67e22;">http://localhost:8080/ignite</code>
                    </p>
                </section>

                <section>
                    <h3>REST API Endpoints</h3>
                    <table class="comparison-table">
                        <tr>
                            <th>Command</th>
                            <th>Description</th>
                            <th>Example</th>
                        </tr>
                        <tr>
                            <td><code>version</code></td>
                            <td>Get Ignite version</td>
                            <td><code>?cmd=version</code></td>
                        </tr>
                        <tr>
                            <td><code>get</code></td>
                            <td>Get cache value</td>
                            <td><code>?cmd=get&amp;cacheName=X&amp;key=Y</code></td>
                        </tr>
                        <tr>
                            <td><code>put</code></td>
                            <td>Put cache value</td>
                            <td><code>?cmd=put&amp;cacheName=X&amp;key=Y&amp;val=Z</code></td>
                        </tr>
                        <tr>
                            <td><code>top</code></td>
                            <td>Cluster topology</td>
                            <td><code>?cmd=top</code></td>
                        </tr>
                        <tr>
                            <td><code>size</code></td>
                            <td>Cache size</td>
                            <td><code>?cmd=size&amp;cacheName=X</code></td>
                        </tr>
                    </table>
                </section>

                <section>
                    <h3>REST API Examples</h3>
                    <pre><code class="bash"># Get Ignite version
curl http://localhost:8080/ignite?cmd=version

# Put a value in cache
curl "http://localhost:8080/ignite?cmd=put&cacheName=testCache&key=user1&val=John"

# Get a value from cache
curl "http://localhost:8080/ignite?cmd=get&cacheName=testCache&key=user1"

# Get all values
curl "http://localhost:8080/ignite?cmd=getall&cacheName=testCache&k1=user1&k2=user2"

# Get cluster topology
curl http://localhost:8080/ignite?cmd=top

# Execute SQL query
curl "http://localhost:8080/ignite?cmd=qryfldexe&pageSize=10&cacheName=myCache&qry=SELECT+*+FROM+Person"</code></pre>
                </section>

                <section>
                    <h3>REST Response Format</h3>
                    <pre><code class="json">// Successful GET response
{
  "successStatus": 0,
  "response": "John",
  "sessionToken": null,
  "error": null
}

// Topology response
{
  "successStatus": 0,
  "response": [
    {
      "nodeId": "abc123...",
      "consistentId": "node1",
      "hostnames": ["localhost"],
      "order": 1,
      "isClient": false,
      "caches": {"testCache": "PARTITIONED"}
    }
  ]
}</code></pre>
                </section>
            </section>

            <!-- Spring Framework Integration -->
            <section>
                <section>
                    <h2>Spring Framework Integration</h2>
                    <p class="accent" style="font-size: 1.2em;">Seamless Integration with Spring Ecosystem</p>
                    <div class="info-box">
                        <strong>10 minutes</strong> - Spring beans, caching annotations, and configuration
                    </div>
                </section>

                <section>
                    <h3>Spring Integration Options</h3>
                    <div class="two-column">
                        <div>
                            <h4 style="color: #e67e22;">Spring Core</h4>
                            <ul>
                                <li>XML configuration</li>
                                <li>Bean-based setup</li>
                                <li>Spring Cache abstraction</li>
                                <li>Transaction management</li>
                            </ul>
                        </div>
                        <div>
                            <h4 style="color: #e67e22;">Spring Data</h4>
                            <ul>
                                <li>Repository pattern</li>
                                <li>CRUD operations</li>
                                <li>Query derivation</li>
                                <li>Paging and sorting</li>
                            </ul>
                        </div>
                    </div>
                </section>

                <section>
                    <h3>Spring Dependencies</h3>
                    <pre><code class="xml">&lt;!-- Core Spring Integration --&gt;
&lt;dependency&gt;
    &lt;groupId&gt;org.apache.ignite&lt;/groupId&gt;
    &lt;artifactId&gt;ignite-spring&lt;/artifactId&gt;
    &lt;version&gt;2.16.0&lt;/version&gt;
&lt;/dependency&gt;

&lt;!-- Spring Data Ignite --&gt;
&lt;dependency&gt;
    &lt;groupId&gt;org.apache.ignite&lt;/groupId&gt;
    &lt;artifactId&gt;ignite-spring-data-ext&lt;/artifactId&gt;
    &lt;version&gt;2.0.0&lt;/version&gt;
&lt;/dependency&gt;</code></pre>
                </section>

                <section>
                    <h3>XML Configuration</h3>
                    <div class="small-code">
                    <pre><code class="xml">&lt;beans xmlns="http://www.springframework.org/schema/beans"
       xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
       xsi:schemaLocation="http://www.springframework.org/schema/beans
       http://www.springframework.org/schema/beans/spring-beans.xsd"&gt;

    &lt;bean id="ignite.cfg" class="org.apache.ignite.configuration.IgniteConfiguration"&gt;
        &lt;property name="igniteInstanceName" value="springNode"/&gt;
        &lt;property name="cacheConfiguration"&gt;
            &lt;list&gt;
                &lt;bean class="org.apache.ignite.configuration.CacheConfiguration"&gt;
                    &lt;property name="name" value="personCache"/&gt;
                    &lt;property name="cacheMode" value="PARTITIONED"/&gt;
                    &lt;property name="backups" value="1"/&gt;
                &lt;/bean&gt;
            &lt;/list&gt;
        &lt;/property&gt;
    &lt;/bean&gt;
&lt;/beans&gt;</code></pre>
                    </div>
                </section>

                <section>
                    <h3>Spring Cache Abstraction</h3>
                    <pre><code class="java">import org.springframework.cache.annotation.*;
import org.springframework.stereotype.Service;

@Service
public class UserService {

    @Cacheable(value = "userCache", key = "#userId")
    public User findUser(Long userId) {
        // This method result will be cached
        return userRepository.findById(userId);
    }

    @CachePut(value = "userCache", key = "#user.id")
    public User updateUser(User user) {
        return userRepository.save(user);
    }

    @CacheEvict(value = "userCache", key = "#userId")
    public void deleteUser(Long userId) {
        userRepository.deleteById(userId);
    }
}</code></pre>
                </section>

                <section>
                    <h3>Enable Caching with Ignite</h3>
                    <pre><code class="java">import org.apache.ignite.cache.spring.SpringCacheManager;
import org.springframework.cache.annotation.EnableCaching;
import org.springframework.context.annotation.*;

@Configuration
@EnableCaching
public class CacheConfig {

    @Bean
    public SpringCacheManager cacheManager() {
        SpringCacheManager mgr = new SpringCacheManager();

        // Reference Ignite configuration
        mgr.setConfigurationPath("ignite-config.xml");

        // Or set programmatically
        // mgr.setConfiguration(igniteConfiguration());

        return mgr;
    }
}</code></pre>
                </section>
            </section>

            <!-- Spring Boot Integration -->
            <section>
                <section>
                    <h2>Spring Boot with Ignite</h2>
                    <p class="accent" style="font-size: 1.2em;">Auto-Configuration and Starters</p>
                    <div class="info-box">
                        <strong>10 minutes</strong> - Production-ready Spring Boot integration
                    </div>
                </section>

                <section>
                    <h3>Spring Boot Dependencies</h3>
                    <pre><code class="xml">&lt;dependency&gt;
    &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;
    &lt;artifactId&gt;spring-boot-starter-web&lt;/artifactId&gt;
    &lt;version&gt;2.7.14&lt;/version&gt;
&lt;/dependency&gt;

&lt;dependency&gt;
    &lt;groupId&gt;org.apache.ignite&lt;/groupId&gt;
    &lt;artifactId&gt;ignite-spring-boot-autoconfigure-ext&lt;/artifactId&gt;
    &lt;version&gt;1.0.0&lt;/version&gt;
&lt;/dependency&gt;

&lt;dependency&gt;
    &lt;groupId&gt;org.apache.ignite&lt;/groupId&gt;
    &lt;artifactId&gt;ignite-core&lt;/artifactId&gt;
    &lt;version&gt;2.16.0&lt;/version&gt;
&lt;/dependency&gt;</code></pre>
                </section>

                <section>
                    <h3>Ignite Configuration Bean</h3>
                    <pre><code class="java">@Configuration
public class IgniteConfig {

    @Bean
    public Ignite igniteInstance() {
        IgniteConfiguration cfg = new IgniteConfiguration();
        cfg.setIgniteInstanceName("springBootNode");
        cfg.setClientMode(false);

        // Configure caches
        CacheConfiguration&lt;Long, User&gt; userCache =
            new CacheConfiguration&lt;&gt;("userCache");
        userCache.setIndexedTypes(Long.class, User.class);

        cfg.setCacheConfiguration(userCache);

        return Ignition.start(cfg);
    }
}</code></pre>
                </section>

                <section>
                    <h3>Ignite-Powered Service</h3>
                    <pre><code class="java">@Service
public class IgniteUserService {

    @Autowired
    private Ignite ignite;

    @Cacheable(value = "userCache", key = "#userId")
    public String getUserName(int userId) {
        System.out.println("Fetching user " + userId + " from database...");
        // Simulate database call
        simulateDelay(1000);
        return "User-" + userId;
    }

    public void putToCache(String cacheName, Object key, Object value) {
        IgniteCache&lt;Object, Object&gt; cache =
            ignite.getOrCreateCache(cacheName);
        cache.put(key, value);
    }

    public Object getFromCache(String cacheName, Object key) {
        IgniteCache&lt;Object, Object&gt; cache = ignite.cache(cacheName);
        return cache != null ? cache.get(key) : null;
    }
}</code></pre>
                </section>

                <section>
                    <h3>REST Controller Example</h3>
                    <pre><code class="java">@RestController
@RequestMapping("/api/users")
public class UserController {

    @Autowired
    private IgniteUserService service;

    @GetMapping("/{id}")
    public Map&lt;String, Object&gt; getUser(@PathVariable int id) {
        long start = System.currentTimeMillis();
        String userName = service.getUserName(id);
        long time = System.currentTimeMillis() - start;

        Map&lt;String, Object&gt; response = new HashMap&lt;&gt;();
        response.put("userId", id);
        response.put("userName", userName);
        response.put("responseTime", time + "ms");
        response.put("cached", time < 100);  // Fast = from cache

        return response;
    }
}</code></pre>
                </section>

                <section>
                    <h3>Application Properties</h3>
                    <pre><code class="properties"># application.properties

# Ignite configuration
ignite.client-mode=false
ignite.peer-class-loading-enabled=true

# Cache settings
ignite.cache.default.backup-count=1
ignite.cache.default.cache-mode=PARTITIONED

# Discovery configuration
ignite.discovery.type=multicast
ignite.discovery.multicast-group=228.10.10.157

# Logging
logging.level.org.apache.ignite=INFO</code></pre>
                </section>
            </section>

            <!-- Kafka Connector -->
            <section>
                <section>
                    <h2>Kafka Connector/Streamer</h2>
                    <p class="accent" style="font-size: 1.2em;">Real-Time Data Streaming</p>
                    <div class="info-box">
                        <strong>10 minutes</strong> - Stream data from Kafka into Ignite caches
                    </div>
                </section>

                <section>
                    <h3>Kafka + Ignite Architecture</h3>
                    <div class="architecture-diagram">
+----------------+     +------------------+     +----------------+
|    Kafka       |     |   Ignite         |     |  Applications  |
|    Cluster     |     |   Cluster        |     |                |
+----------------+     +------------------+     +----------------+
        |                      |                       |
        v                      v                       v
+----------------+     +------------------+     +----------------+
|   Topic:       | --> | KafkaStreamer    | --> |  SQL Queries   |
|   events       |     | (Consumer)       |     |  Cache Ops     |
|   orders       |     |                  |     |  Compute       |
|   metrics      |     | DataStreamer     |     |                |
+----------------+     +------------------+     +----------------+
        |                      |
        |     Real-time        |
        +----> Ingestion  -----+
                    </div>
                </section>

                <section>
                    <h3>Kafka Dependencies</h3>
                    <pre><code class="xml">&lt;dependency&gt;
    &lt;groupId&gt;org.apache.ignite&lt;/groupId&gt;
    &lt;artifactId&gt;ignite-kafka&lt;/artifactId&gt;
    &lt;version&gt;2.16.0&lt;/version&gt;
&lt;/dependency&gt;

&lt;dependency&gt;
    &lt;groupId&gt;org.apache.kafka&lt;/groupId&gt;
    &lt;artifactId&gt;kafka-clients&lt;/artifactId&gt;
    &lt;version&gt;3.4.0&lt;/version&gt;
&lt;/dependency&gt;</code></pre>
                </section>

                <section>
                    <h3>KafkaStreamer Configuration</h3>
                    <pre><code class="java">import org.apache.ignite.stream.kafka.KafkaStreamer;
import org.apache.kafka.clients.consumer.ConsumerConfig;

// Configure Kafka consumer properties
Properties kafkaProps = new Properties();
kafkaProps.put(ConsumerConfig.BOOTSTRAP_SERVERS_CONFIG,
    "localhost:9092");
kafkaProps.put(ConsumerConfig.GROUP_ID_CONFIG,
    "ignite-group");
kafkaProps.put(ConsumerConfig.KEY_DESERIALIZER_CLASS_CONFIG,
    StringDeserializer.class.getName());
kafkaProps.put(ConsumerConfig.VALUE_DESERIALIZER_CLASS_CONFIG,
    StringDeserializer.class.getName());
kafkaProps.put(ConsumerConfig.AUTO_OFFSET_RESET_CONFIG,
    "earliest");</code></pre>
                </section>

                <section>
                    <h3>Starting the Kafka Streamer</h3>
                    <div class="small-code">
                    <pre><code class="java">KafkaStreamer&lt;String, String, String&gt; kafkaStreamer = new KafkaStreamer&lt;&gt;();

// Configure streamer
kafkaStreamer.setIgnite(ignite);
kafkaStreamer.setStreamer(ignite.dataStreamer("kafkaCache"));
kafkaStreamer.setTopic("ignite-topic");
kafkaStreamer.setThreads(4);
kafkaStreamer.setConsumerConfig(kafkaProps);

// Set tuple extractor - transforms Kafka messages to cache entries
kafkaStreamer.setSingleTupleExtractor(msg -&gt; {
    // Parse message: "key:value" format
    String[] parts = msg.split(":", 2);
    if (parts.length == 2) {
        return new AbstractMap.SimpleEntry&lt;&gt;(parts[0], parts[1]);
    }
    return null;
});

// Start streaming
kafkaStreamer.start();
System.out.println("Streaming from Kafka topic: ignite-topic");</code></pre>
                    </div>
                </section>

                <section>
                    <h3>Custom Message Transformations</h3>
                    <pre><code class="java">// Complex transformation example
kafkaStreamer.setSingleTupleExtractor(
    new StreamSingleTupleExtractor&lt;String, String, Order&gt;() {

    @Override
    public Map.Entry&lt;String, Order&gt; extract(String message) {
        try {
            // Parse JSON message
            ObjectMapper mapper = new ObjectMapper();
            JsonNode node = mapper.readTree(message);

            String orderId = node.get("orderId").asText();
            Order order = new Order(
                orderId,
                node.get("customer").asText(),
                node.get("amount").asDouble()
            );

            return new AbstractMap.SimpleEntry&lt;&gt;(orderId, order);
        } catch (Exception e) {
            return null; // Skip malformed messages
        }
    }
});</code></pre>
                </section>

                <section>
                    <h3>Kafka Integration Benefits</h3>
                    <div class="two-column">
                        <div>
                            <h4 style="color: #e67e22;">Streaming</h4>
                            <ul>
                                <li>Real-time data ingestion</li>
                                <li>High throughput</li>
                                <li>Parallel consumers</li>
                                <li>At-least-once delivery</li>
                            </ul>
                        </div>
                        <div>
                            <h4 style="color: #e67e22;">Analytics</h4>
                            <ul>
                                <li>Event-driven processing</li>
                                <li>SQL on streaming data</li>
                                <li>Low-latency queries</li>
                                <li>In-memory aggregation</li>
                            </ul>
                        </div>
                    </div>
                </section>
            </section>

            <!-- Hibernate L2 Cache -->
            <section>
                <section>
                    <h2>Hibernate L2 Cache</h2>
                    <p class="accent" style="font-size: 1.2em;">Distributed ORM Caching</p>
                    <div class="info-box">
                        <strong>10 minutes</strong> - Use Ignite as Hibernate second-level cache
                    </div>
                </section>

                <section>
                    <h3>Hibernate Cache Levels</h3>
                    <div class="architecture-diagram">
+----------------------------------------------------------+
|                    Application                            |
+----------------------------------------------------------+
                          |
                          v
+----------------------------------------------------------+
|              Hibernate Session (L1 Cache)                 |
|              - Per-session scope                          |
|              - Automatic, always enabled                  |
+----------------------------------------------------------+
                          |
                          v
+----------------------------------------------------------+
|              Second-Level Cache (L2)       [IGNITE]       |
|              - SessionFactory scope                       |
|              - Shared across sessions                     |
|              - Distributed with Ignite                    |
+----------------------------------------------------------+
                          |
                          v
+----------------------------------------------------------+
|                      Database                             |
+----------------------------------------------------------+
                    </div>
                </section>

                <section>
                    <h3>Hibernate L2 Dependencies</h3>
                    <pre><code class="xml">&lt;dependency&gt;
    &lt;groupId&gt;org.apache.ignite&lt;/groupId&gt;
    &lt;artifactId&gt;ignite-hibernate_5.3&lt;/artifactId&gt;
    &lt;version&gt;2.16.0&lt;/version&gt;
&lt;/dependency&gt;

&lt;dependency&gt;
    &lt;groupId&gt;org.hibernate&lt;/groupId&gt;
    &lt;artifactId&gt;hibernate-core&lt;/artifactId&gt;
    &lt;version&gt;5.6.15.Final&lt;/version&gt;
&lt;/dependency&gt;</code></pre>
                    <div class="warning-box fragment">
                        <strong>Note:</strong> Use the matching ignite-hibernate version for your Hibernate version (5.1, 5.3, etc.)
                    </div>
                </section>

                <section>
                    <h3>Hibernate Configuration</h3>
                    <div class="small-code">
                    <pre><code class="xml">&lt;hibernate-configuration&gt;
    &lt;session-factory&gt;
        &lt;!-- Database settings --&gt;
        &lt;property name="connection.driver_class"&gt;org.h2.Driver&lt;/property&gt;
        &lt;property name="connection.url"&gt;jdbc:h2:mem:testdb&lt;/property&gt;

        &lt;!-- Enable Ignite L2 cache --&gt;
        &lt;property name="cache.use_second_level_cache"&gt;true&lt;/property&gt;
        &lt;property name="cache.use_query_cache"&gt;true&lt;/property&gt;

        &lt;!-- Ignite as cache provider --&gt;
        &lt;property name="cache.region.factory_class"&gt;
            org.apache.ignite.cache.hibernate.HibernateRegionFactory
        &lt;/property&gt;

        &lt;!-- Ignite instance configuration --&gt;
        &lt;property name="org.apache.ignite.hibernate.ignite_instance_name"&gt;
            hibernate-grid
        &lt;/property&gt;
        &lt;property name="org.apache.ignite.hibernate.default_access_type"&gt;
            READ_WRITE
        &lt;/property&gt;
    &lt;/session-factory&gt;
&lt;/hibernate-configuration&gt;</code></pre>
                    </div>
                </section>

                <section>
                    <h3>Cacheable Entity</h3>
                    <pre><code class="java">import org.hibernate.annotations.Cache;
import org.hibernate.annotations.CacheConcurrencyStrategy;
import javax.persistence.*;

@Entity
@Table(name = "products")
@Cacheable
@Cache(usage = CacheConcurrencyStrategy.READ_WRITE)
public class Product {

    @Id
    @GeneratedValue(strategy = GenerationType.IDENTITY)
    private Long id;

    private String name;
    private Double price;

    // Constructors, getters, setters...
}</code></pre>
                </section>

                <section>
                    <h3>Cache Concurrency Strategies</h3>
                    <table class="comparison-table">
                        <tr>
                            <th>Strategy</th>
                            <th>Use Case</th>
                            <th>Consistency</th>
                        </tr>
                        <tr>
                            <td><code>READ_ONLY</code></td>
                            <td>Reference data, never changes</td>
                            <td>Highest</td>
                        </tr>
                        <tr>
                            <td><code>READ_WRITE</code></td>
                            <td>Read-mostly data</td>
                            <td>High</td>
                        </tr>
                        <tr>
                            <td><code>NONSTRICT_READ_WRITE</code></td>
                            <td>Rarely updated, occasional stale OK</td>
                            <td>Medium</td>
                        </tr>
                        <tr>
                            <td><code>TRANSACTIONAL</code></td>
                            <td>Full ACID requirements</td>
                            <td>Strict</td>
                        </tr>
                    </table>
                </section>

                <section>
                    <h3>Monitoring L2 Cache</h3>
                    <pre><code class="java">// Enable statistics
sessionFactory.getStatistics().setStatisticsEnabled(true);

// First query - hits database
Session session1 = sessionFactory.openSession();
Product p1 = session1.get(Product.class, 1L);
session1.close();

// Second query - hits L2 cache!
Session session2 = sessionFactory.openSession();
Product p2 = session2.get(Product.class, 1L);
session2.close();

// Print statistics
Statistics stats = sessionFactory.getStatistics();
System.out.println("L2 Cache Hits: " + stats.getSecondLevelCacheHitCount());
System.out.println("L2 Cache Misses: " + stats.getSecondLevelCacheMissCount());
System.out.println("L2 Cache Puts: " + stats.getSecondLevelCachePutCount());</code></pre>
                </section>

                <section>
                    <h3>L2 Cache Benefits</h3>
                    <div class="highlight-box">
                        <ul class="benefit-list" style="margin: 0; padding-left: 20px;">
                            <li>Reduced database load</li>
                            <li>Better application performance</li>
                            <li>Distributed caching across cluster</li>
                            <li>Automatic cache synchronization</li>
                            <li>Transparent to application code</li>
                        </ul>
                    </div>
                </section>
            </section>

            <!-- JDBC/ODBC Drivers -->
            <section>
                <section>
                    <h2>JDBC/ODBC Drivers</h2>
                    <p class="accent" style="font-size: 1.2em;">Standard SQL Connectivity</p>
                    <div class="info-box">
                        <strong>5 minutes</strong> - Connect using standard database drivers
                    </div>
                </section>

                <section>
                    <h3>JDBC Connection</h3>
                    <pre><code class="java">import java.sql.*;

// JDBC connection URL format
String jdbcUrl = "jdbc:ignite:thin://localhost:10800";

// Alternative: specify schema
String jdbcUrlWithSchema = "jdbc:ignite:thin://localhost:10800/PUBLIC";

// Connect
try (Connection conn = DriverManager.getConnection(jdbcUrl)) {
    // Execute SQL
    Statement stmt = conn.createStatement();
    ResultSet rs = stmt.executeQuery(
        "SELECT * FROM Person WHERE age > 25"
    );

    while (rs.next()) {
        System.out.println(rs.getString("name") +
            ": " + rs.getInt("age"));
    }
}</code></pre>
                </section>

                <section>
                    <h3>JDBC with Connection Pooling</h3>
                    <pre><code class="java">import com.zaxxer.hikari.HikariConfig;
import com.zaxxer.hikari.HikariDataSource;

// Configure HikariCP
HikariConfig config = new HikariConfig();
config.setJdbcUrl("jdbc:ignite:thin://localhost:10800");
config.setMaximumPoolSize(10);
config.setMinimumIdle(5);
config.setConnectionTimeout(30000);

// Create datasource
HikariDataSource dataSource = new HikariDataSource(config);

// Use in application
try (Connection conn = dataSource.getConnection()) {
    PreparedStatement ps = conn.prepareStatement(
        "INSERT INTO Person (id, name, age) VALUES (?, ?, ?)"
    );
    ps.setLong(1, 1001);
    ps.setString(2, "John Doe");
    ps.setInt(3, 30);
    ps.executeUpdate();
}</code></pre>
                </section>

                <section>
                    <h3>ODBC Configuration</h3>
                    <div class="two-column">
                        <div>
                            <h4 style="color: #e67e22;">Windows DSN Setup</h4>
                            <pre style="font-size: 0.45em;"><code class="text">[Apache Ignite]
Driver=Apache Ignite
Address=localhost:10800
Schema=PUBLIC</code></pre>
                        </div>
                        <div>
                            <h4 style="color: #e67e22;">Linux odbc.ini</h4>
                            <pre style="font-size: 0.45em;"><code class="text">[IgniteDSN]
Driver=/path/to/libignite-odbc.so
Address=localhost:10800
Schema=PUBLIC</code></pre>
                        </div>
                    </div>
                    <p class="fragment" style="margin-top: 20px; font-size: 0.8em;">
                        Use ODBC for Excel, Power BI, Tableau, and other BI tools
                    </p>
                </section>

                <section>
                    <h3>JDBC Driver Types</h3>
                    <table class="comparison-table">
                        <tr>
                            <th>Driver</th>
                            <th>Connection String</th>
                            <th>Use Case</th>
                        </tr>
                        <tr>
                            <td><strong>Thin Client</strong></td>
                            <td><code>jdbc:ignite:thin://host:10800</code></td>
                            <td>Lightweight, remote access</td>
                        </tr>
                        <tr>
                            <td><strong>Client Node</strong></td>
                            <td><code>jdbc:ignite:cfg://config.xml</code></td>
                            <td>Full cluster participation</td>
                        </tr>
                    </table>
                    <div class="info-box fragment">
                        <strong>Recommendation:</strong> Use thin client JDBC for most applications - simpler setup and lower resource usage.
                    </div>
                </section>
            </section>

            <!-- Client vs Server Nodes -->
            <section>
                <section>
                    <h2>Client vs Server Nodes</h2>
                    <p class="accent" style="font-size: 1.2em;">Choosing the Right Node Type</p>
                    <div class="info-box">
                        <strong>5 minutes</strong> - Understanding node topology roles
                    </div>
                </section>

                <section>
                    <h3>Node Type Comparison</h3>
                    <div class="architecture-diagram">
+--------------------+          +--------------------+
|   SERVER NODE      |          |   CLIENT NODE      |
+--------------------+          +--------------------+
| - Stores data      |          | - No data storage  |
| - Participates in  |          | - Lightweight      |
|   compute grid     |          | - Routes requests  |
| - Full cluster     |          | - App integration  |
|   member           |          |                    |
| - Higher resources |          | - Lower overhead   |
+--------------------+          +--------------------+
         |                               |
         v                               v
+--------------------+          +--------------------+
|   Data Nodes       |          |   Application      |
|   Compute Nodes    |          |   Servers          |
|   Primary/Backup   |          |   Web Tier         |
+--------------------+          +--------------------+
                    </div>
                </section>

                <section>
                    <h3>Server Node Configuration</h3>
                    <pre><code class="java">IgniteConfiguration cfg = new IgniteConfiguration();

// Server mode (default)
cfg.setClientMode(false);

// Configure as data node
cfg.setDataStorageConfiguration(
    new DataStorageConfiguration()
        .setDefaultDataRegionConfiguration(
            new DataRegionConfiguration()
                .setMaxSize(2L * 1024 * 1024 * 1024) // 2GB
        )
);

// Start server node
Ignite ignite = Ignition.start(cfg);
System.out.println("Server node started: " + ignite.cluster().localNode().id());</code></pre>
                </section>

                <section>
                    <h3>Client Node Configuration</h3>
                    <pre><code class="java">IgniteConfiguration cfg = new IgniteConfiguration();

// Enable client mode
cfg.setClientMode(true);

// Client-specific settings
cfg.setNetworkTimeout(10000);
cfg.setClientFailureDetectionTimeout(30000);

// Discovery configuration
TcpDiscoverySpi disco = new TcpDiscoverySpi();
TcpDiscoveryVmIpFinder ipFinder = new TcpDiscoveryVmIpFinder();
ipFinder.setAddresses(Arrays.asList(
    "server1:47500..47509",
    "server2:47500..47509"
));
disco.setIpFinder(ipFinder);
cfg.setDiscoverySpi(disco);

// Start client node
Ignite client = Ignition.start(cfg);</code></pre>
                </section>

                <section>
                    <h3>Thin Client (Lightweight)</h3>
                    <pre><code class="java">import org.apache.ignite.client.*;

// Thin client - even lighter than client node
ClientConfiguration cfg = new ClientConfiguration()
    .setAddresses("server1:10800", "server2:10800");

// Connect
try (IgniteClient client = Ignition.startClient(cfg)) {

    // Cache operations
    ClientCache&lt;Integer, String&gt; cache =
        client.getOrCreateCache("myCache");

    cache.put(1, "Hello");
    String value = cache.get(1);

    // SQL queries
    SqlFieldsQuery query = new SqlFieldsQuery(
        "SELECT * FROM Person WHERE age > ?"
    ).setArgs(25);

    try (QueryCursor&lt;List&lt;?&gt;&gt; cursor = cache.query(query)) {
        for (List&lt;?&gt; row : cursor) {
            System.out.println(row);
        }
    }
}</code></pre>
                </section>

                <section>
                    <h3>When to Use Each Type</h3>
                    <table class="comparison-table">
                        <tr>
                            <th>Node Type</th>
                            <th>Best For</th>
                            <th>Resources</th>
                        </tr>
                        <tr>
                            <td><strong>Server</strong></td>
                            <td>Data storage, heavy compute, core cluster</td>
                            <td>High (dedicated)</td>
                        </tr>
                        <tr>
                            <td><strong>Client</strong></td>
                            <td>App servers, compute submission, near cache</td>
                            <td>Medium</td>
                        </tr>
                        <tr>
                            <td><strong>Thin Client</strong></td>
                            <td>Simple CRUD, SQL queries, low footprint</td>
                            <td>Low (connection only)</td>
                        </tr>
                    </table>
                </section>

                <section>
                    <h3>Client Node Features</h3>
                    <div class="two-column">
                        <div>
                            <h4 style="color: #27ae60;">Advantages</h4>
                            <ul>
                                <li>No data storage overhead</li>
                                <li>Near cache support</li>
                                <li>Full compute capabilities</li>
                                <li>Continuous queries</li>
                                <li>Fast data affinity</li>
                            </ul>
                        </div>
                        <div>
                            <h4 style="color: #e74c3c;">Considerations</h4>
                            <ul>
                                <li>Cluster topology impact</li>
                                <li>Discovery overhead</li>
                                <li>Memory for metadata</li>
                                <li>Connection management</li>
                            </ul>
                        </div>
                    </div>
                </section>
            </section>

            <!-- Integration Patterns Summary -->
            <section>
                <section>
                    <h2>Integration Patterns Summary</h2>
                    <div class="icon-grid" style="grid-template-columns: repeat(2, 1fr);">
                        <div class="icon-item">
                            <h4>Cache-Aside</h4>
                            <p>Application manages cache explicitly</p>
                        </div>
                        <div class="icon-item">
                            <h4>Read-Through</h4>
                            <p>Cache loads from database on miss</p>
                        </div>
                        <div class="icon-item">
                            <h4>Write-Through</h4>
                            <p>Writes go to cache and database</p>
                        </div>
                        <div class="icon-item">
                            <h4>Write-Behind</h4>
                            <p>Async writes to database</p>
                        </div>
                    </div>
                </section>

                <section>
                    <h3>Choosing Integration Approach</h3>
                    <table class="comparison-table">
                        <tr>
                            <th>Requirement</th>
                            <th>Recommended Approach</th>
                        </tr>
                        <tr>
                            <td>Multi-language access</td>
                            <td>REST API or Thin Client</td>
                        </tr>
                        <tr>
                            <td>Spring application</td>
                            <td>Spring Cache + Spring Data</td>
                        </tr>
                        <tr>
                            <td>Streaming data</td>
                            <td>Kafka Streamer</td>
                        </tr>
                        <tr>
                            <td>Existing Hibernate app</td>
                            <td>L2 Cache integration</td>
                        </tr>
                        <tr>
                            <td>BI tools / SQL</td>
                            <td>JDBC/ODBC drivers</td>
                        </tr>
                        <tr>
                            <td>High-performance Java</td>
                            <td>Client or Server node</td>
                        </tr>
                    </table>
                </section>
            </section>

            <!-- Best Practices -->
            <section>
                <h2>Integration Best Practices</h2>
                <div class="two-column">
                    <div>
                        <h4 style="color: #27ae60;">Do</h4>
                        <ul>
                            <li>Use thin clients for simple access</li>
                            <li>Pool JDBC connections</li>
                            <li>Configure proper timeouts</li>
                            <li>Enable SSL for production</li>
                            <li>Monitor integration points</li>
                        </ul>
                    </div>
                    <div>
                        <h4 style="color: #e74c3c;">Avoid</h4>
                        <ul>
                            <li>Too many client nodes</li>
                            <li>Unbounded Kafka consumers</li>
                            <li>Missing error handling</li>
                            <li>Synchronous calls in async code</li>
                            <li>Ignoring connection limits</li>
                        </ul>
                    </div>
                </div>
            </section>

            <!-- Common Issues -->
            <section>
                <h2>Troubleshooting Integration</h2>
                <table class="comparison-table">
                    <tr>
                        <th>Issue</th>
                        <th>Cause</th>
                        <th>Solution</th>
                    </tr>
                    <tr>
                        <td>REST not responding</td>
                        <td>Connector not configured</td>
                        <td>Enable ConnectorConfiguration</td>
                    </tr>
                    <tr>
                        <td>L2 cache not working</td>
                        <td>Missing @Cacheable</td>
                        <td>Add entity annotations</td>
                    </tr>
                    <tr>
                        <td>Kafka not streaming</td>
                        <td>Topic/broker issues</td>
                        <td>Verify Kafka connectivity</td>
                    </tr>
                    <tr>
                        <td>JDBC timeout</td>
                        <td>Server overload</td>
                        <td>Add connection pooling</td>
                    </tr>
                    <tr>
                        <td>Client disconnects</td>
                        <td>Discovery issues</td>
                        <td>Configure IP finder properly</td>
                    </tr>
                </table>
            </section>

            <!-- Lab Preview -->
            <section>
                <h2>Lab 10 Preview</h2>
                <div class="info-box">
                    <h3 style="margin-top: 0; color: #2c3e50;">Hands-On Exercises</h3>
                    <ul>
                        <li><strong>Exercise 1:</strong> Enable and use REST API (15 min)</li>
                        <li><strong>Exercise 2:</strong> Spring Boot integration (20 min)</li>
                        <li><strong>Exercise 3:</strong> Stream data from Kafka (15 min)</li>
                        <li><strong>Exercise 4:</strong> Configure Hibernate L2 cache (10 min)</li>
                    </ul>
                </div>
            </section>

            <!-- Key Takeaways -->
            <section>
                <h2>Key Takeaways</h2>
                <ul class="benefit-list">
                    <li class="fragment"><strong>REST API</strong> - Language-agnostic HTTP access</li>
                    <li class="fragment"><strong>Spring Integration</strong> - Cache abstraction and Spring Data</li>
                    <li class="fragment"><strong>Kafka Streamer</strong> - Real-time data ingestion</li>
                    <li class="fragment"><strong>Hibernate L2</strong> - Distributed ORM caching</li>
                    <li class="fragment"><strong>JDBC/ODBC</strong> - Standard SQL connectivity</li>
                    <li class="fragment"><strong>Node Types</strong> - Server, Client, and Thin Client options</li>
                </ul>
            </section>

            <!-- Q&A -->
            <section>
                <h2>Questions?</h2>
                <div class="highlight-box">
                    <p style="font-size: 1.2em; margin: 0;">
                        Next: Lab 10 - Integration and Connectivity Exercises
                    </p>
                </div>
                <p style="margin-top: 40px; color: #666;">
                    Module 11: Performance Tuning and Monitoring
                </p>
            </section>

            <!-- Resources -->
            <section>
                <h2>Additional Resources</h2>
                <ul>
                    <li><a href="https://ignite.apache.org/docs/latest/restapi" target="_blank">REST API Documentation</a></li>
                    <li><a href="https://ignite.apache.org/docs/latest/extensions-and-integrations/spring/spring-boot" target="_blank">Spring Boot Integration Guide</a></li>
                    <li><a href="https://ignite.apache.org/docs/latest/extensions-and-integrations/streaming/kafka-streamer" target="_blank">Kafka Streamer Guide</a></li>
                    <li><a href="https://ignite.apache.org/docs/latest/extensions-and-integrations/hibernate-l2-cache" target="_blank">Hibernate L2 Cache Setup</a></li>
                    <li><a href="https://ignite.apache.org/docs/latest/SQL/JDBC/jdbc-driver" target="_blank">JDBC Driver Documentation</a></li>
                </ul>
            </section>

        </div>
    </div>

    <script src="https://cdnjs.cloudflare.com/ajax/libs/reveal.js/4.5.0/reveal.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/reveal.js/4.5.0/plugin/highlight/highlight.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/reveal.js/4.5.0/plugin/notes/notes.min.js"></script>
    <script>
        Reveal.initialize({
            hash: true, width: 1100, height: 750, margin: 0.05, minScale: 0.5, maxScale: 1.5,
            slideNumber: 'c/t',
            showSlideNumber: 'all',
            transition: 'slide',
            transitionSpeed: 'default',
            backgroundTransition: 'fade',
            center: true,
            plugins: [ RevealHighlight, RevealNotes ],
            // Nested slides navigation
            navigationMode: 'default',
            // Progress bar
            progress: true,
            // Display controls
            controls: true,
            // Help overlay
            help: true,
            // Timing
            defaultTiming: 60
        });
    </script>
</body>
</html>
